# Karin Plugin Spec v6

> **Less is More**
>
> æœ€ç®€å•çš„äº‹æƒ…åº”è¯¥æœ€ç®€å•åšï¼Œå¤æ‚çš„äº‹æƒ…åº”è¯¥å¯ä»¥åšã€‚

---

## ä¸€ã€è®¾è®¡å“²å­¦

### 1.1 æ ¸å¿ƒåŸåˆ™

1. **5 åˆ†é’Ÿä¸Šæ‰‹** - æ–°æ‰‹ 5 åˆ†é’Ÿå†…èƒ½å†™å‡ºç¬¬ä¸€ä¸ªæ’ä»¶
2. **æ¸è¿›å¼å¤æ‚** - ç®€å•éœ€æ±‚ç®€å•å†™ï¼Œå¤æ‚éœ€æ±‚æ‰éœ€è¦å¤æ‚å†™æ³•
3. **çº¦å®šä¼˜äºé…ç½®** - åˆç†çš„é»˜è®¤å€¼ï¼Œå‡å°‘é…ç½®
4. **å‡½æ•°å³æ’ä»¶** - ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªæ’ä»¶

### 1.2 åæ€ v5 çš„é—®é¢˜

| v5 çš„é—®é¢˜ | v6 çš„è§£å†³ |
|----------|----------|
| æ¦‚å¿µå¤ªå¤šï¼ˆPlugin/Service/Task/Bus...ï¼‰ | ç»Ÿä¸€ä¸º"æ’ä»¶"ï¼ŒæŒ‰éœ€æ‰©å±• |
| å…¥é—¨é—¨æ§›é«˜ | ä¸€ä¸ªå‡½æ•°å°±èƒ½å†™æ’ä»¶ |
| è¿‡åº¦è®¾è®¡ï¼ˆTrace/Metricsï¼‰ | åˆ é™¤ï¼Œæ¡†æ¶å†…éƒ¨å¤„ç† |
| API å¤ªå¤æ‚ | æç®€ APIï¼Œæ¸è¿›å¼æš´éœ² |
| é…ç½®å¤ªç¹ç | çº¦å®šä¼˜äºé…ç½® |

---

## äºŒã€æœ€ç®€å½¢å¼ï¼ˆ5 åˆ†é’Ÿä¸Šæ‰‹ï¼‰

### 2.1 Hello World

```ts
// plugins/hello.ts
export default function (ctx) {
  if (ctx.msg === 'hello') {
    ctx.reply('world')
  }
}
```

**å°±è¿™æ ·ï¼Œä¸€ä¸ªæ’ä»¶å®Œæˆäº†ã€‚**

### 2.2 ä½¿ç”¨è§„åˆ™åŒ¹é…

```ts
// plugins/ping.ts
export default {
  rule: /^ping$/,
  fn: ctx => ctx.reply('pong')
}
```

### 2.3 å‘½ä»¤å½¢å¼

```ts
// plugins/echo.ts
export default {
  cmd: 'echo',
  fn: (ctx, args) => ctx.reply(args.join(' '))
}
```

---

## ä¸‰ã€æ’ä»¶å½¢å¼

### 3.1 ä¸‰ç§ç­‰ä»·å½¢å¼

```ts
// å½¢å¼ 1: çº¯å‡½æ•°ï¼ˆæœ€ç®€å•ï¼‰
export default function (ctx) {
  // è‡ªå·±åˆ¤æ–­æ˜¯å¦å¤„ç†
}

// å½¢å¼ 2: å¯¹è±¡ï¼ˆæ¨èï¼‰
export default {
  rule: /^ping$/,      // æˆ– cmd: 'ping'
  fn: ctx => ctx.reply('pong')
}

// å½¢å¼ 3: å®Œæ•´é…ç½®ï¼ˆéœ€è¦æ—¶ä½¿ç”¨ï¼‰
export default {
  name: 'ping',
  rule: /^ping$/,
  fn: ctx => ctx.reply('pong'),
  // å¯é€‰é…ç½®...
}
```

### 3.2 å®Œæ•´æ’ä»¶æ¥å£

```ts
interface Plugin {
  /** æ’ä»¶åç§°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ç”¨æ–‡ä»¶åï¼‰ */
  name?: string

  /** åŒ¹é…è§„åˆ™ï¼ˆå››é€‰ä¸€ï¼‰ */
  rule?: RegExp | string | ((ctx: Context) => boolean)
  cmd?: string | string[]
  event?: 'message' | 'notice' | 'request'
  fn?: (ctx: Context, ...args: any[]) => any

  /** å¯é€‰é…ç½® */
  priority?: number      // ä¼˜å…ˆçº§ï¼Œé»˜è®¤ 1000
  permission?: Permission // æƒé™
  cd?: number            // å†·å´æ—¶é—´ï¼ˆç§’ï¼‰
  log?: boolean          // æ˜¯å¦è®°å½•æ—¥å¿—

  /** ç”Ÿå‘½å‘¨æœŸï¼ˆå¾ˆå°‘ç”¨ï¼‰ */
  mounted?: () => void
  unmounted?: () => void
}

// æƒé™ç®€å†™
type Permission = 'all' | 'admin' | 'master' | 'group' | 'private'
```

---

## å››ã€Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰

### 4.1 æç®€ API

```ts
interface Context {
  // ============ åŸºç¡€ä¿¡æ¯ ============

  /** åŸå§‹æ¶ˆæ¯æ–‡æœ¬ */
  msg: string

  /** å‘é€è€… ID */
  userId: string

  /** ç¾¤ IDï¼ˆç§èŠä¸ºç©ºï¼‰ */
  groupId?: string

  /** æ˜¯å¦ç¾¤èŠ */
  isGroup: boolean

  /** æ˜¯å¦ç§èŠ */
  isPrivate: boolean

  /** æ˜¯å¦ç®¡ç†å‘˜ */
  isAdmin: boolean

  /** æ˜¯å¦ä¸»äºº */
  isMaster: boolean

  // ============ æ ¸å¿ƒæ–¹æ³• ============

  /** å›å¤æ¶ˆæ¯ */
  reply(msg: string | Message): Promise<void>

  /** å¼•ç”¨å›å¤ */
  quote(msg: string | Message): Promise<void>

  // ============ æŒ‰éœ€è®¿é—® ============

  /** å®Œæ•´æ¶ˆæ¯å¯¹è±¡ */
  message: Message

  /** å‘é€è€…è¯¦æƒ… */
  sender: Sender

  /** Bot å®ä¾‹ */
  bot: Bot

  /** æ—¥å¿— */
  log: Logger
}
```

### 4.2 ä½¿ç”¨ç¤ºä¾‹

```ts
export default {
  rule: /^ä½ å¥½/,
  fn: ctx => {
    // ç®€å•ç”¨æ³•
    ctx.reply(`ä½ å¥½ ${ctx.userId}`)

    // éœ€è¦æ›´å¤šä¿¡æ¯æ—¶
    ctx.reply(`ä½ å¥½ ${ctx.sender.nickname}`)
  }
}
```

---

## äº”ã€å¸¸è§åœºæ™¯

### 5.1 å‘½ä»¤æ’ä»¶

```ts
// plugins/help.ts
export default {
  cmd: 'help',
  fn: ctx => ctx.reply(`
å¯ç”¨å‘½ä»¤ï¼š
/ping - æµ‹è¯•
/help - å¸®åŠ©
/time - æ—¶é—´
  `.trim())
}
```

### 5.2 å¸¦å‚æ•°çš„å‘½ä»¤

```ts
// plugins/echo.ts
export default {
  cmd: 'echo',
  fn: (ctx, ...args) => {
    if (args.length === 0) {
      return ctx.reply('ç”¨æ³•: /echo <å†…å®¹>')
    }
    ctx.reply(args.join(' '))
  }
}
```

### 5.3 æ­£åˆ™åŒ¹é…

```ts
// plugins/weather.ts
export default {
  rule: /^(.+)å¤©æ°”$/,
  fn: (ctx, match) => {
    const city = match[1]
    ctx.reply(`${city}ä»Šå¤©æ™´ï¼Œæ¸©åº¦ 25Â°C`)
  }
}
```

### 5.4 æƒé™æ§åˆ¶

```ts
// plugins/admin.ts
export default {
  cmd: 'ban',
  permission: 'admin',
  fn: async (ctx, userId) => {
    await ctx.bot.ban(ctx.groupId, userId)
    ctx.reply('å·²å°ç¦')
  }
}
```

### 5.5 å†·å´æ—¶é—´

```ts
// plugins/sign.ts
export default {
  cmd: 'sign',
  cd: 86400, // 24 å°æ—¶å†·å´
  fn: ctx => ctx.reply('ç­¾åˆ°æˆåŠŸï¼')
}
```

### 5.6 ä»…ç¾¤èŠ/ç§èŠ

```ts
// plugins/group-only.ts
export default {
  cmd: 'vote',
  permission: 'group', // ä»…ç¾¤èŠ
  fn: ctx => ctx.reply('å‘èµ·æŠ•ç¥¨...')
}

// plugins/private-only.ts
export default {
  cmd: 'secret',
  permission: 'private', // ä»…ç§èŠ
  fn: ctx => ctx.reply('è¿™æ˜¯ç§˜å¯†æ¶ˆæ¯')
}
```

### 5.7 å¤šå‘½ä»¤åˆ«å

```ts
// plugins/ping.ts
export default {
  cmd: ['ping', 'p', 'æµ‹è¯•'],
  fn: ctx => ctx.reply('pong')
}
```

### 5.8 è‡ªå®šä¹‰åŒ¹é…

```ts
// plugins/custom.ts
export default {
  rule: ctx => ctx.msg.includes('å‚»') && ctx.isGroup,
  fn: ctx => ctx.reply('è¯·æ–‡æ˜ç”¨è¯­')
}
```

---

## å…­ã€è¿›é˜¶ç”¨æ³•

### 6.1 ä¸€ä¸ªæ–‡ä»¶å¤šä¸ªæ’ä»¶

```ts
// plugins/utils.ts
export const ping = {
  cmd: 'ping',
  fn: ctx => ctx.reply('pong')
}

export const time = {
  cmd: 'time',
  fn: ctx => ctx.reply(new Date().toLocaleString())
}

export const date = {
  cmd: 'date',
  fn: ctx => ctx.reply(new Date().toDateString())
}
```

### 6.2 ä½¿ç”¨çŠ¶æ€

```ts
// plugins/counter.ts
let count = 0

export default {
  cmd: 'count',
  fn: ctx => ctx.reply(`è®¡æ•°: ${++count}`)
}
```

### 6.3 å¼‚æ­¥å¤„ç†

```ts
// plugins/fetch.ts
export default {
  cmd: 'ip',
  fn: async ctx => {
    const res = await fetch('https://api.ipify.org')
    const ip = await res.text()
    ctx.reply(`IP: ${ip}`)
  }
}
```

### 6.4 ç”Ÿå‘½å‘¨æœŸ

```ts
// plugins/timer.ts
let timer: NodeJS.Timer

export default {
  name: 'timer',

  mounted() {
    timer = setInterval(() => {
      console.log('tick')
    }, 1000)
  },

  unmounted() {
    clearInterval(timer)
  },

  cmd: 'timer',
  fn: ctx => ctx.reply('Timer is running')
}
```

---

## ä¸ƒã€æ’ä»¶åŒ…ï¼ˆNPM å‘å¸ƒï¼‰

### 7.1 ç›®å½•ç»“æ„

```
karin-plugin-xxx/
â”œâ”€â”€ package.json
â”œâ”€â”€ index.ts          # å…¥å£
â””â”€â”€ plugins/          # æ’ä»¶ç›®å½•
    â”œâ”€â”€ ping.ts
    â””â”€â”€ help.ts
```

### 7.2 package.json

```json
{
  "name": "karin-plugin-xxx",
  "version": "1.0.0",
  "karin": {
    "plugins": "./plugins"
  }
}
```

æˆ–è€…ç›´æ¥å¯¼å‡ºï¼š

```json
{
  "name": "karin-plugin-xxx",
  "main": "./index.ts",
  "karin": true
}
```

### 7.3 å…¥å£æ–‡ä»¶

```ts
// index.ts
export const ping = {
  cmd: 'ping',
  fn: ctx => ctx.reply('pong')
}

export const help = {
  cmd: 'help',
  fn: ctx => ctx.reply('...')
}

// æˆ–è€…å¯¼å‡ºæ•°ç»„
export default [ping, help]
```

### 7.4 å¸¦é…ç½®çš„æ’ä»¶åŒ…

```ts
// index.ts
interface Config {
  prefix?: string
  cooldown?: number
}

export default function (config: Config = {}) {
  const { prefix = '/', cooldown = 0 } = config

  return [
    {
      cmd: 'ping',
      cd: cooldown,
      fn: ctx => ctx.reply('pong')
    }
  ]
}
```

ç”¨æˆ·ä½¿ç”¨ï¼š

```ts
// karin.config.ts
export default {
  plugins: {
    'karin-plugin-xxx': {
      prefix: '#',
      cooldown: 5
    }
  }
}
```

---

## å…«ã€ç”¨æˆ·é…ç½®

### 8.1 karin.config.tsï¼ˆå¯é€‰ï¼‰

```ts
// karin.config.ts
export default {
  // æ’ä»¶ç›®å½•ï¼ˆé»˜è®¤ ./pluginsï¼‰
  plugins: './plugins',

  // æ’é™¤
  exclude: ['**/*.test.ts'],

  // NPM æ’ä»¶é…ç½®
  packages: {
    'karin-plugin-xxx': {
      enabled: true,
      config: { /* ... */ }
    }
  }
}
```

### 8.2 å¤§å¤šæ•°æƒ…å†µä¸éœ€è¦é…ç½®

åªéœ€è¦æŠŠæ’ä»¶æ”¾åˆ° `plugins/` ç›®å½•ï¼Œæ¡†æ¶è‡ªåŠ¨åŠ è½½ã€‚

---

## ä¹ã€å¼€å‘ä½“éªŒ

### 9.1 åˆ›å»ºé¡¹ç›®

```bash
# åˆ›å»ºæ’ä»¶
npx karin create my-plugin

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­æ›´æ–°ï¼‰
npx karin dev

# ç”Ÿäº§æ¨¡å¼
npx karin start
```

### 9.2 çƒ­æ›´æ–°

ä¿®æ”¹ `plugins/` ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œè‡ªåŠ¨é‡è½½ï¼Œæ— éœ€é‡å¯ã€‚

### 9.3 TypeScript æ”¯æŒ

å®Œæ•´çš„ç±»å‹æç¤ºï¼Œä½†ä¸å¼ºåˆ¶ä½¿ç”¨ TypeScriptã€‚

---

## åã€ç±»å‹å®šä¹‰

```ts
// ============ æ’ä»¶ ============

type PluginFn = (ctx: Context, ...args: any[]) => any

type PluginRule = RegExp | string | ((ctx: Context) => boolean)

interface PluginObject {
  name?: string
  rule?: PluginRule
  cmd?: string | string[]
  event?: 'message' | 'notice' | 'request'
  fn?: PluginFn
  priority?: number
  permission?: Permission
  cd?: number
  log?: boolean
  mounted?: () => void
  unmounted?: () => void
}

type Plugin = PluginFn | PluginObject

type Permission = 'all' | 'admin' | 'master' | 'group' | 'private'

// ============ ä¸Šä¸‹æ–‡ ============

interface Context {
  msg: string
  userId: string
  groupId?: string
  isGroup: boolean
  isPrivate: boolean
  isAdmin: boolean
  isMaster: boolean
  reply(msg: string | Message): Promise<void>
  quote(msg: string | Message): Promise<void>
  message: Message
  sender: Sender
  bot: Bot
  log: Logger
}

// ============ é…ç½® ============

interface KarinConfig {
  plugins?: string
  exclude?: string[]
  packages?: Record<string, PackageConfig>
}

interface PackageConfig {
  enabled?: boolean
  config?: Record<string, any>
}
```

---

## åä¸€ã€å®Œæ•´ç¤ºä¾‹

### 11.1 5 åˆ†é’Ÿå†™ä¸€ä¸ªæ’ä»¶

```ts
// plugins/greet.ts
export default {
  rule: /^(æ—©|æ™šå®‰|ä½ å¥½)/,
  fn: ctx => {
    const greets = {
      'æ—©': 'æ—©ä¸Šå¥½ï¼',
      'æ™šå®‰': 'æ™šå®‰ï¼Œå¥½æ¢¦~',
      'ä½ å¥½': 'ä½ å¥½å‘€ï¼'
    }
    const key = ctx.msg.match(/^(æ—©|æ™šå®‰|ä½ å¥½)/)[1]
    ctx.reply(greets[key])
  }
}
```

### 11.2 å®ç”¨æ’ä»¶ç¤ºä¾‹

```ts
// plugins/dice.ts
export default {
  cmd: ['dice', 'roll', 'éª°å­'],
  fn: ctx => {
    const result = Math.floor(Math.random() * 6) + 1
    ctx.reply(`ğŸ² ${result}`)
  }
}

// plugins/coin.ts
export default {
  cmd: ['coin', 'ç¡¬å¸'],
  fn: ctx => {
    const result = Math.random() > 0.5 ? 'æ­£é¢' : 'åé¢'
    ctx.reply(`ğŸª™ ${result}`)
  }
}

// plugins/repeat.ts
let lastMsg = ''
let count = 0

export default function (ctx) {
  if (ctx.msg === lastMsg) {
    count++
    if (count >= 3) {
      ctx.reply(ctx.msg) // å¤è¯»
      count = 0
    }
  } else {
    lastMsg = ctx.msg
    count = 1
  }
}
```

### 11.3 å®Œæ•´æ’ä»¶åŒ…

```ts
// karin-plugin-tools/index.ts

export const ping = {
  cmd: 'ping',
  fn: ctx => ctx.reply('pong')
}

export const time = {
  cmd: 'time',
  fn: ctx => ctx.reply(new Date().toLocaleString('zh-CN'))
}

export const calc = {
  cmd: 'calc',
  fn: (ctx, expr) => {
    try {
      // å®‰å…¨è®¡ç®—ï¼ˆå®é™…åº”ç”¨éœ€è¦æ›´å®‰å…¨çš„å®ç°ï¼‰
      const result = eval(expr)
      ctx.reply(`= ${result}`)
    } catch {
      ctx.reply('è®¡ç®—é”™è¯¯')
    }
  }
}

export const random = {
  cmd: ['random', 'rand'],
  fn: (ctx, min = '1', max = '100') => {
    const n = Math.floor(Math.random() * (Number(max) - Number(min) + 1)) + Number(min)
    ctx.reply(`ğŸ² ${n}`)
  }
}

export const choose = {
  cmd: ['choose', 'é€‰æ‹©'],
  fn: (ctx, ...options) => {
    if (options.length === 0) {
      return ctx.reply('ç”¨æ³•: /choose é€‰é¡¹1 é€‰é¡¹2 ...')
    }
    const choice = options[Math.floor(Math.random() * options.length)]
    ctx.reply(`æˆ‘é€‰æ‹©: ${choice}`)
  }
}
```

---

## åäºŒã€ä¸ v5 å¯¹æ¯”

| ç‰¹æ€§ | v5 | v6 |
|------|----|----|
| Hello World ä»£ç é‡ | ~20 è¡Œ | ~3 è¡Œ |
| æ¦‚å¿µæ•°é‡ | 10+ | 3ï¼ˆPlugin, Context, é…ç½®ï¼‰ |
| å…¥é—¨æ—¶é—´ | 1 å°æ—¶ | 5 åˆ†é’Ÿ |
| é…ç½®æ–‡ä»¶ | å¿…é¡» | å¯é€‰ |
| ç±»å‹å¤æ‚åº¦ | é«˜ | ä½ |
| Service/Task | ç‹¬ç«‹æ¦‚å¿µ | ç”¨ç”Ÿå‘½å‘¨æœŸå®ç° |
| äº‹ä»¶æ€»çº¿ | å†…ç½® | ä¸éœ€è¦ï¼ˆç›´æ¥ importï¼‰ |
| å¯è§‚æµ‹æ€§ | å†…ç½® | æ¡†æ¶å†…éƒ¨å¤„ç† |

---

## åä¸‰ã€é«˜çº§åŠŸèƒ½ï¼ˆæŒ‰éœ€ä½¿ç”¨ï¼‰

### 13.1 å®šæ—¶ä»»åŠ¡

```ts
// plugins/daily.ts
export default {
  name: 'daily',

  mounted() {
    // æ¯å¤© 9 ç‚¹æ‰§è¡Œ
    this.timer = setInterval(() => {
      const now = new Date()
      if (now.getHours() === 9 && now.getMinutes() === 0) {
        this.bot.sendGroup('ç¾¤å·', 'æ—©ä¸Šå¥½ï¼')
      }
    }, 60000)
  },

  unmounted() {
    clearInterval(this.timer)
  }
}
```

### 13.2 æ•°æ®åº“/çŠ¶æ€ç®¡ç†

```ts
// plugins/sign.ts
import { db } from '@karin/db' // æ¡†æ¶æä¾›

export default {
  cmd: 'sign',
  cd: 86400,
  fn: async ctx => {
    const today = new Date().toDateString()
    const key = `sign:${ctx.userId}:${today}`

    if (await db.get(key)) {
      return ctx.reply('ä»Šå¤©å·²ç­¾åˆ°')
    }

    await db.set(key, true)
    ctx.reply('ç­¾åˆ°æˆåŠŸï¼')
  }
}
```

### 13.3 è·¨æ’ä»¶é€šä¿¡

```ts
// plugins/a.ts
export const data = { count: 0 }

export default {
  cmd: 'inc',
  fn: ctx => {
    data.count++
    ctx.reply(`count = ${data.count}`)
  }
}

// plugins/b.ts
import { data } from './a'

export default {
  cmd: 'get',
  fn: ctx => ctx.reply(`count = ${data.count}`)
}
```

### 13.4 åŠ¨æ€åŠ è½½

```ts
// plugins/loader.ts
export default {
  cmd: 'load',
  permission: 'master',
  fn: async (ctx, name) => {
    try {
      await ctx.bot.loadPlugin(`./dynamic/${name}.ts`)
      ctx.reply(`å·²åŠ è½½ ${name}`)
    } catch (e) {
      ctx.reply(`åŠ è½½å¤±è´¥: ${e.message}`)
    }
  }
}
```

---

## åå››ã€è®¾è®¡å†³ç­–è¯´æ˜

### 14.1 ä¸ºä»€ä¹ˆåˆ é™¤ Service/Taskï¼Ÿ

- **Service**: ç”¨ `mounted`/`unmounted` ç”Ÿå‘½å‘¨æœŸå®ç°
- **Task**: ç”¨ `setInterval` æˆ– cron åº“å®ç°
- **ç†ç”±**: å‡å°‘æ¦‚å¿µï¼Œå¤§å¤šæ•°æ’ä»¶ç”¨ä¸åˆ°

### 14.2 ä¸ºä»€ä¹ˆåˆ é™¤äº‹ä»¶æ€»çº¿ï¼Ÿ

- ç›´æ¥ç”¨ ES Module çš„ `import/export` å…±äº«çŠ¶æ€
- æ›´ç®€å•ã€æ›´ç›´è§‚ã€ç±»å‹æ›´å®‰å…¨

### 14.3 ä¸ºä»€ä¹ˆåˆ é™¤å¯è§‚æµ‹æ€§ï¼Ÿ

- æ¡†æ¶å†…éƒ¨è‡ªåŠ¨è®°å½•æ—¥å¿—å’ŒæŒ‡æ ‡
- æ’ä»¶å¼€å‘è€…æ— éœ€å…³å¿ƒ

### 14.4 ä¸ºä»€ä¹ˆç®€åŒ–æƒé™ï¼Ÿ

- `'admin' | 'master' | 'group' | 'private'` è¦†ç›– 99% åœºæ™¯
- å¤æ‚æƒé™ç”¨è‡ªå®šä¹‰ `rule` å‡½æ•°å®ç°

---

## åäº”ã€æ€»ç»“

```
v6 æ ¸å¿ƒç†å¿µï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚    æœ€ç®€å•çš„äº‹æƒ…ï¼Œç”¨æœ€ç®€å•çš„æ–¹å¼              â”‚
â”‚                                             â”‚
â”‚    export default {                         â”‚
â”‚      cmd: 'ping',                           â”‚
â”‚      fn: ctx => ctx.reply('pong')           â”‚
â”‚    }                                        â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸€ä¸ªå¥½çš„æ’ä»¶ç³»ç»Ÿåº”è¯¥è®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œ
è€Œä¸æ˜¯å­¦ä¹ æ¡†æ¶æ¦‚å¿µã€‚
```

---

> **v6 = æç®€ + å¤Ÿç”¨ + æ¸è¿›å¼**
>
> - 5 åˆ†é’Ÿä¸Šæ‰‹
> - 3 è¡Œä»£ç å†™æ’ä»¶
> - å¤æ‚åŠŸèƒ½æŒ‰éœ€ä½¿ç”¨
